---
title: "Module Technique 1 ‚Äî Introduction √† Docker"
subtitle: "Conteneuriser tes applications pour les rendre portables et reproductibles"
author: "Fran√ßois Boussengui"
date: last-modified
categories: [docker, mlops, technique]
title-block-banner: "#06436e"
title-block-banner-color: "rgb(251, 225, 174)"
toc: true
toc-depth: 3
number-sections: true
---

```{r echo=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE, error=FALSE, fig.align = "center", out.width = "100%")
```

```{r echo=FALSE}
library(reticulate)
use_virtualenv("/Users/f.b/.virtualenvs/r-reticulate")
```



```{=html}
<style>
.objectifs-box {
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
    border-left: 4px solid #06436e;
    padding: 1.5rem;
    border-radius: 0 12px 12px 0;
    margin: 1.5rem 0;
}

.objectifs-box h3 {
    color: #06436e;
    margin-top: 0;
}

.concept-cle {
    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
    border-left: 4px solid #72f1b8;
    padding: 1.25rem;
    border-radius: 0 10px 10px 0;
    margin: 1.5rem 0;
}

.attention-box {
    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
    border-left: 4px solid #fe4454;
    padding: 1.25rem;
    border-radius: 0 10px 10px 0;
    margin: 1.5rem 0;
}

.exemple-box {
    background: linear-gradient(135deg, #fef9e6 0%, #fef3c7 100%);
    border-left: 4px solid #f8d65c;
    padding: 1.25rem;
    border-radius: 0 10px 10px 0;
    margin: 1.5rem 0;
}

.terminal-box {
    background: #1e293b;
    color: #e2e8f0;
    padding: 1rem 1.25rem;
    border-radius: 8px;
    font-family: 'Fira Code', monospace;
    margin: 1rem 0;
    overflow-x: auto;
}

.terminal-box .prompt {
    color: #72f1b8;
}

.terminal-box .comment {
    color: #64748b;
}

.terminal-box .output {
    color: #f8d65c;
}

.comparison-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin: 1.5rem 0;
}

.comparison-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.comparison-card h4 {
    margin-top: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.prerequis-temps {
    display: flex;
    gap: 2rem;
    flex-wrap: wrap;
    margin: 1rem 0;
}

.prerequis-temps > div {
    background: #f1f5f9;
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
}

.commande-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
}

.commande-table th {
    background: #06436e;
    color: white;
    padding: 0.75rem;
    text-align: left;
}

.commande-table td {
    padding: 0.75rem;
    border-bottom: 1px solid #e5e7eb;
}

.commande-table tr:nth-child(even) {
    background: #f9fafb;
}

.commande-table code {
    background: #e2e8f0;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-size: 0.9rem;
}
</style>
```

:::{.objectifs-box}
### üéØ Objectifs d'apprentissage

√Ä l'issue de ce module, tu seras capable de :

1. **Expliquer** pourquoi Docker est essentiel en Data Science et MLOps
2. **Distinguer** les concepts d'image, conteneur, volume et r√©seau
3. **Installer** Docker sur ta machine (Windows, Mac ou Linux)
4. **√âcrire** un Dockerfile basique pour une application Python
5. **Utiliser** les commandes essentielles pour g√©rer tes conteneurs
:::

:::{.prerequis-temps}
:::{div}
üìö **Pr√©requis** : Notions de base en ligne de commande (terminal/bash)
:::
:::{div}
‚è±Ô∏è **Temps estim√©** : 3 heures (installation incluse)
:::
:::

---

# Pourquoi Docker ?

## Le probl√®me du "√ßa marche sur ma machine"

Tu as s√ªrement d√©j√† v√©cu cette situation : tu d√©veloppes un script Python, tout fonctionne parfaitement sur ton ordinateur, et quand tu le partages avec un coll√®gue ou que tu le d√©ploies en production... rien ne marche.

Les causes possibles sont nombreuses :

- Versions de Python diff√©rentes (3.8 vs 3.11)
- Packages manquants ou versions incompatibles
- Variables d'environnement absentes
- D√©pendances syst√®me (librairies C, drivers...)
- Diff√©rences d'OS (Windows vs Linux)

:::{.exemple-box}
**üéØ Exemple concret**

Tu as d√©velopp√© un mod√®le de pr√©diction de sinistralit√© avec `scikit-learn 1.3`, `pandas 2.0` et `numpy 1.24`. Ton coll√®gue a des versions diff√©rentes ‚Üí le mod√®le crashe ou, pire, donne des r√©sultats diff√©rents silencieusement.
:::

## La solution Docker : tout empaqueter

Docker r√©sout ce probl√®me en **empaquetant** ton application avec **tout son environnement** :

```{mermaid}
%%| fig-cap: "Sans Docker vs Avec Docker"

flowchart LR
    subgraph SANS["‚ùå Sans Docker"]
        A1[Ton code] --> B1[Machine 1<br>Python 3.8]
        A1 --> C1[Machine 2<br>Python 3.11]
        A1 --> D1[Serveur<br>Python ???]
    end
    
    subgraph AVEC["‚úÖ Avec Docker"]
        A2[Ton code<br>+ Dockerfile] --> B2[Conteneur<br>Python 3.10]
        B2 --> C2[Machine 1]
        B2 --> D2[Machine 2]
        B2 --> E2[Serveur]
    end
```

:::{.concept-cle}
**üí° Point cl√©**

Un conteneur Docker embarque ton code **ET** son environnement complet. Il fonctionnera de fa√ßon identique sur n'importe quelle machine o√π Docker est install√©.
:::

## Docker vs Machines Virtuelles

Tu connais peut-√™tre les machines virtuelles (VM). Docker est diff√©rent et plus l√©ger :

:::{.comparison-grid}

:::{.comparison-card}
#### üñ•Ô∏è Machine Virtuelle

- Virtualise **tout le syst√®me** (OS complet)
- D√©marre en **minutes**
- Consomme **beaucoup de ressources** (RAM, disque)
- Isolation **totale**
- Taille : **plusieurs Go**
:::

:::{.comparison-card}
#### üê≥ Conteneur Docker

- Virtualise **seulement l'application**
- D√©marre en **secondes**
- Consomme **peu de ressources**
- Partage le noyau de l'OS h√¥te
- Taille : **quelques Mo √† centaines de Mo**
:::

:::

```{mermaid}
%%| fig-cap: "Architecture VM vs Docker"

flowchart TB
    subgraph VM["Machine Virtuelle"]
        direction TB
        V1[App 1] --> VOS1[OS Guest 1]
        V2[App 2] --> VOS2[OS Guest 2]
        VOS1 --> HYP[Hyperviseur]
        VOS2 --> HYP
        HYP --> VH[Hardware]
    end
    
    subgraph DOCKER["Conteneurs Docker"]
        direction TB
        D1[App 1] --> DE[Docker Engine]
        D2[App 2] --> DE
        D3[App 3] --> DE
        DE --> DOS[OS H√¥te]
        DOS --> DH[Hardware]
    end
```

---

# Les concepts fondamentaux

## Image vs Conteneur

C'est LA distinction cruciale √† comprendre :

| Concept | Analogie | Description |
|---------|----------|-------------|
| **Image** | Recette de cuisine | Template en lecture seule qui d√©finit l'environnement |
| **Conteneur** | Plat cuisin√© | Instance en cours d'ex√©cution d'une image |

:::{.exemple-box}
**üç≥ Analogie culinaire**

- L'**image** c'est la recette du g√¢teau : les ingr√©dients, les √©tapes, les quantit√©s
- Le **conteneur** c'est le g√¢teau que tu as pr√©par√© √† partir de la recette
- Tu peux faire **plusieurs g√¢teaux** (conteneurs) √† partir de **la m√™me recette** (image)
:::

```{mermaid}
%%| fig-cap: "Relation Image ‚Üí Conteneur"

flowchart LR
    I[üñºÔ∏è Image<br>python:3.10] --> C1[üì¶ Conteneur 1<br>mon-app-dev]
    I --> C2[üì¶ Conteneur 2<br>mon-app-test]
    I --> C3[üì¶ Conteneur 3<br>mon-app-prod]
```

## Dockerfile : la recette

Le **Dockerfile** est un fichier texte qui contient les instructions pour construire une image.

Voici un exemple simple pour une application Python :

```dockerfile
# Image de base : Python 3.10 sur Linux l√©ger (Alpine)
FROM python:3.10-slim

# D√©finir le r√©pertoire de travail dans le conteneur
WORKDIR /app

# Copier le fichier des d√©pendances
COPY requirements.txt .

# Installer les d√©pendances
RUN pip install --no-cache-dir -r requirements.txt

# Copier le code de l'application
COPY . .

# Commande par d√©faut au d√©marrage du conteneur
CMD ["python", "main.py"]
```

Chaque instruction cr√©e une **couche** (layer) dans l'image :

```{mermaid}
%%| fig-cap: "Les couches d'une image Docker"

flowchart TB
    L1[Layer 1: Image de base Python 3.10] --> L2
    L2[Layer 2: WORKDIR /app] --> L3
    L3[Layer 3: COPY requirements.txt] --> L4
    L4[Layer 4: RUN pip install] --> L5
    L5[Layer 5: COPY . .] --> L6
    L6[Layer 6: CMD python main.py]
    
    style L1 fill:#06436e,color:#fff
    style L4 fill:#f8d65c,color:#333
    style L6 fill:#72f1b8,color:#333
```

:::{.concept-cle}
**üí° Point cl√©**

Docker **met en cache** les couches. Si tu modifies seulement ton code (pas les d√©pendances), seules les derni√®res couches seront reconstruites. C'est pourquoi on copie `requirements.txt` **avant** le code !
:::

## Volumes : persister les donn√©es

Par d√©faut, les donn√©es dans un conteneur sont **√©ph√©m√®res** : elles disparaissent quand le conteneur s'arr√™te.

Les **volumes** permettent de persister les donn√©es et de les partager entre le conteneur et ta machine :

```{mermaid}
%%| fig-cap: "Volume Docker"

flowchart LR
    subgraph HOST["üñ•Ô∏è Machine h√¥te"]
        H1[/home/user/data]
    end
    
    subgraph CONTAINER["üì¶ Conteneur"]
        C1[/app/data]
    end
    
    H1 <-->|Volume mont√©| C1
```

---

# Installation de Docker

## Sur Windows

1. **Pr√©requis** : Windows 10/11 64-bit avec WSL2 activ√©

2. **T√©l√©charger** Docker Desktop : [https://www.docker.com/products/docker-desktop](https://www.docker.com/products/docker-desktop)

3. **Installer** en suivant l'assistant

4. **V√©rifier** l'installation :

:::{.terminal-box}
<span class="prompt">$</span> docker --version<br>
<span class="output">Docker version 24.0.7, build afdd53b</span><br><br>
<span class="prompt">$</span> docker run hello-world<br>
<span class="output">Hello from Docker!</span><br>
<span class="output">This message shows that your installation appears to be working correctly.</span>
:::

## Sur macOS

1. **T√©l√©charger** Docker Desktop pour Mac : [https://www.docker.com/products/docker-desktop](https://www.docker.com/products/docker-desktop)
   - Choisir **Apple Silicon** (M1/M2/M3) ou **Intel** selon ton Mac

2. **Installer** en glissant dans Applications

3. **Lancer** Docker Desktop

4. **V√©rifier** dans le terminal

## Sur Linux (Ubuntu/Debian)

:::{.terminal-box}
<span class="comment"># Mettre √† jour les packages</span><br>
<span class="prompt">$</span> sudo apt update<br><br>
<span class="comment"># Installer les pr√©requis</span><br>
<span class="prompt">$</span> sudo apt install ca-certificates curl gnupg<br><br>
<span class="comment"># Ajouter la cl√© GPG officielle de Docker</span><br>
<span class="prompt">$</span> sudo install -m 0755 -d /etc/apt/keyrings<br>
<span class="prompt">$</span> curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg<br><br>
<span class="comment"># Ajouter le repository</span><br>
<span class="prompt">$</span> echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null<br><br>
<span class="comment"># Installer Docker</span><br>
<span class="prompt">$</span> sudo apt update<br>
<span class="prompt">$</span> sudo apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin<br><br>
<span class="comment"># Permettre d'utiliser Docker sans sudo</span><br>
<span class="prompt">$</span> sudo usermod -aG docker $USER<br>
<span class="comment"># Puis d√©connecte-toi et reconnecte-toi</span>
:::

:::{.attention-box}
**‚ö†Ô∏è Important**

Apr√®s l'installation sur Linux, n'oublie pas de te d√©connecter/reconnecter (ou red√©marrer) pour que les permissions Docker soient prises en compte.
:::

---

# Les commandes essentielles

## Cheat sheet

Voici les commandes que tu utiliseras au quotidien :

### Gestion des images

| Commande | Description |
|----------|-------------|
| `docker build -t nom:tag .` | Construire une image depuis un Dockerfile |
| `docker images` | Lister les images locales |
| `docker pull nom:tag` | T√©l√©charger une image depuis Docker Hub |
| `docker rmi nom:tag` | Supprimer une image |

### Gestion des conteneurs

| Commande | Description |
|----------|-------------|
| `docker run nom:tag` | Cr√©er et d√©marrer un conteneur |
| `docker run -it nom:tag bash` | D√©marrer en mode interactif |
| `docker run -d nom:tag` | D√©marrer en arri√®re-plan (detached) |
| `docker ps` | Lister les conteneurs en cours |
| `docker ps -a` | Lister tous les conteneurs (y compris arr√™t√©s) |
| `docker stop id` | Arr√™ter un conteneur |
| `docker rm id` | Supprimer un conteneur |
| `docker logs id` | Voir les logs d'un conteneur |
| `docker exec -it id bash` | Entrer dans un conteneur en cours |

### Options utiles de `docker run`

| Option | Description |
|--------|-------------|
| `-p 8080:80` | Mapper le port 80 du conteneur au port 8080 de l'h√¥te |
| `-v /host/path:/container/path` | Monter un volume |
| `-e VAR=value` | D√©finir une variable d'environnement |
| `--name mon-conteneur` | Donner un nom au conteneur |
| `--rm` | Supprimer le conteneur automatiquement √† l'arr√™t |

## Exemples pratiques

### Lancer un conteneur Python interactif

:::{.terminal-box}
<span class="prompt">$</span> docker run -it python:3.10 python<br>
<span class="output">Python 3.10.13 (main, Nov 15 2023, 03:40:21)</span><br>
<span class="output">>>> print("Hello depuis Docker!")</span><br>
<span class="output">Hello depuis Docker!</span><br>
<span class="output">>>> exit()</span>
:::

### Construire et lancer ta propre image

:::{.terminal-box}
<span class="comment"># Se placer dans le dossier contenant le Dockerfile</span><br>
<span class="prompt">$</span> cd mon-projet<br><br>
<span class="comment"># Construire l'image (le point = contexte courant)</span><br>
<span class="prompt">$</span> docker build -t mon-app:v1 .<br><br>
<span class="comment"># Lancer un conteneur</span><br>
<span class="prompt">$</span> docker run --rm mon-app:v1<br><br>
<span class="comment"># Lancer avec un volume pour le d√©veloppement</span><br>
<span class="prompt">$</span> docker run --rm -v $(pwd):/app mon-app:v1
:::

---

# Ton premier Dockerfile Data Science

## Structure du projet

Cr√©ons un projet simple qui calcule des indicateurs de sinistralit√© :

```
mon-projet/
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ main.py
‚îî‚îÄ‚îÄ data/
    ‚îî‚îÄ‚îÄ sinistres.csv
```

## Le fichier requirements.txt

```text
pandas==2.0.3
numpy==1.24.3
matplotlib==3.7.2
```

## Le script main.py

```python
"""
Calcul d'indicateurs de sinistralit√©
Premier script dockeris√© !
"""
import pandas as pd
import numpy as np

def calculer_indicateurs(df: pd.DataFrame) -> dict:
    """Calcule les indicateurs cl√©s de sinistralit√©."""
    
    # Fr√©quence = nombre de sinistres / exposition
    frequence = len(df) / df['exposition'].sum()
    
    # S√©v√©rit√© moyenne = co√ªt total / nombre de sinistres
    severite = df['cout'].mean()
    
    # Prime pure = fr√©quence √ó s√©v√©rit√©
    prime_pure = frequence * severite
    
    return {
        'frequence': frequence,
        'severite': severite,
        'prime_pure': prime_pure,
        'nb_sinistres': len(df),
        'cout_total': df['cout'].sum()
    }

def main():
    print("=" * 50)
    print("üê≥ Script de sinistralit√© dockeris√©")
    print("=" * 50)
    
    # Cr√©er des donn√©es d'exemple
    np.random.seed(42)
    n_sinistres = 1000
    
    df = pd.DataFrame({
        'id_sinistre': range(n_sinistres),
        'cout': np.random.lognormal(mean=7, sigma=1, size=n_sinistres),
        'exposition': np.random.uniform(0.5, 1.0, size=n_sinistres)
    })
    
    # Calculer les indicateurs
    indicateurs = calculer_indicateurs(df)
    
    print("\nüìä Indicateurs calcul√©s :")
    print(f"   Nombre de sinistres : {indicateurs['nb_sinistres']:,}")
    print(f"   Co√ªt total         : {indicateurs['cout_total']:,.0f} ‚Ç¨")
    print(f"   Fr√©quence          : {indicateurs['frequence']:.4f}")
    print(f"   S√©v√©rit√© moyenne   : {indicateurs['severite']:,.0f} ‚Ç¨")
    print(f"   Prime pure         : {indicateurs['prime_pure']:,.0f} ‚Ç¨")
    print("\n‚úÖ Calcul termin√© avec succ√®s !")

if __name__ == "__main__":
    main()
```

## Le Dockerfile

```dockerfile
# Image de base Python 3.10
FROM python:3.10-slim

# M√©tadonn√©es
LABEL maintainer="Fran√ßois Boussengui"
LABEL description="Calcul d'indicateurs de sinistralit√©"

# D√©finir le r√©pertoire de travail
WORKDIR /app

# Copier et installer les d√©pendances (pour profiter du cache Docker)
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copier le code source
COPY main.py .

# Commande par d√©faut
CMD ["python", "main.py"]
```

## Build et Run

:::{.terminal-box}
<span class="comment"># Construire l'image</span><br>
<span class="prompt">$</span> docker build -t sinistralite:v1 .<br>
<span class="output">[+] Building 15.3s (9/9) FINISHED</span><br>
<span class="output"> => [1/4] FROM python:3.10-slim</span><br>
<span class="output"> => [2/4] WORKDIR /app</span><br>
<span class="output"> => [3/4] COPY requirements.txt .</span><br>
<span class="output"> => [4/4] RUN pip install ...</span><br>
<span class="output"> => [5/5] COPY main.py .</span><br><br>
<span class="comment"># Lancer le conteneur</span><br>
<span class="prompt">$</span> docker run --rm sinistralite:v1<br>
<span class="output">==================================================</span><br>
<span class="output">üê≥ Script de sinistralit√© dockeris√©</span><br>
<span class="output">==================================================</span><br>
<span class="output"></span><br>
<span class="output">üìä Indicateurs calcul√©s :</span><br>
<span class="output">   Nombre de sinistres : 1,000</span><br>
<span class="output">   Co√ªt total         : 1,847,293 ‚Ç¨</span><br>
<span class="output">   Fr√©quence          : 1.3245</span><br>
<span class="output">   S√©v√©rit√© moyenne   : 1,847 ‚Ç¨</span><br>
<span class="output">   Prime pure         : 2,447 ‚Ç¨</span><br>
<span class="output"></span><br>
<span class="output">‚úÖ Calcul termin√© avec succ√®s !</span>
:::

---

# Bonnes pratiques

## Optimiser la taille de l'image

:::{.comparison-grid}

:::{.comparison-card}
#### ‚ùå √Ä √©viter

```dockerfile
FROM python:3.10
RUN apt-get update
RUN apt-get install -y gcc
RUN pip install pandas
RUN pip install numpy
COPY . .
```

- Image de base lourde
- Plusieurs RUN = plusieurs couches
- Pas de nettoyage du cache
:::

:::{.comparison-card}
#### ‚úÖ Recommand√©

```dockerfile
FROM python:3.10-slim
RUN apt-get update && \
    apt-get install -y --no-install-recommends gcc && \
    rm -rf /var/lib/apt/lists/*
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
```

- Image slim (plus l√©g√®re)
- Commandes group√©es
- Cache nettoy√©
:::

:::

## Utiliser un .dockerignore

Comme `.gitignore`, le fichier `.dockerignore` exclut des fichiers du contexte de build :

```text
# .dockerignore
__pycache__/
*.pyc
*.pyo
.git/
.gitignore
.env
*.md
.vscode/
.idea/
data/raw/
```

:::{.concept-cle}
**üí° Point cl√©**

Un bon `.dockerignore` acc√©l√®re le build et r√©duit la taille de l'image en √©vitant de copier des fichiers inutiles.
:::

## Ne pas lancer en root

Par d√©faut, les conteneurs s'ex√©cutent en tant que root. En production, c'est un risque de s√©curit√© :

```dockerfile
FROM python:3.10-slim

# Cr√©er un utilisateur non-root
RUN useradd --create-home appuser
WORKDIR /home/appuser/app

# Copier les fichiers
COPY --chown=appuser:appuser . .

# Passer √† l'utilisateur non-root
USER appuser

# Installer les d√©pendances pour cet utilisateur
RUN pip install --user --no-cache-dir -r requirements.txt

CMD ["python", "main.py"]
```

---

# Synth√®se {.unnumbered}

:::{.synthese-card}
### üéØ Les 5 points essentiels √† retenir

1. **Docker r√©sout le "√ßa marche sur ma machine"** ‚Äî En empaquetant ton code avec son environnement complet

2. **Image ‚â† Conteneur** ‚Äî L'image est la recette, le conteneur est le plat cuisin√©

3. **Le Dockerfile d√©finit l'image** ‚Äî C'est la recette √©tape par √©tape pour construire ton environnement

4. **Les volumes persistent les donn√©es** ‚Äî Sans volume, les donn√©es sont perdues √† l'arr√™t du conteneur

5. **L'ordre des instructions compte** ‚Äî Mets les √©l√©ments qui changent peu (d√©pendances) avant ceux qui changent souvent (code) pour profiter du cache
:::

---

# Auto-√©valuation {.unnumbered}

::: {.callout-note collapse="true"}
## Question 1 : Quelle est la diff√©rence entre une image et un conteneur ?

**R√©ponse** : Une **image** est un template en lecture seule qui contient l'environnement (OS, d√©pendances, code). Un **conteneur** est une instance en cours d'ex√©cution de cette image. On peut cr√©er plusieurs conteneurs √† partir de la m√™me image.
:::

::: {.callout-note collapse="true"}
## Question 2 : Pourquoi copie-t-on requirements.txt avant le reste du code dans un Dockerfile ?

**R√©ponse** : Pour profiter du **cache Docker**. Les d√©pendances changent rarement, alors que le code change souvent. En copiant requirements.txt d'abord et en installant les d√©pendances, cette couche sera mise en cache. Les builds suivants seront beaucoup plus rapides car seules les couches apr√®s le changement seront reconstruites.
:::

::: {.callout-note collapse="true"}
## Question 3 : Comment persister des donn√©es entre les ex√©cutions d'un conteneur ?

**R√©ponse** : En utilisant un **volume**. On monte un dossier de la machine h√¥te dans le conteneur avec l'option `-v` : `docker run -v /chemin/hote:/chemin/conteneur mon-image`. Les donn√©es √©crites dans `/chemin/conteneur` seront en fait stock√©es dans `/chemin/hote` et persisteront.
:::

::: {.callout-note collapse="true"}
## Question 4 : Quelle commande permet d'entrer dans un conteneur en cours d'ex√©cution ?

**R√©ponse** : `docker exec -it <container_id> bash` (ou `sh` si bash n'est pas disponible). L'option `-i` garde STDIN ouvert et `-t` alloue un pseudo-TTY pour avoir un terminal interactif.
:::

---

# Ressources compl√©mentaires {.unnumbered}

- **Documentation officielle** : [https://docs.docker.com](https://docs.docker.com)
- **Docker Hub** (images publiques) : [https://hub.docker.com](https://hub.docker.com)
- **Tutoriel interactif** : [https://www.docker.com/play-with-docker](https://www.docker.com/play-with-docker)
- **Grafikart (FR)** : Excellents tutoriels Docker en fran√ßais sur YouTube

---

:::{.exemple-box}
**üê≥ Prochaine √©tape technique**

**Semaine 2** : Nous approfondirons Docker avec Docker Compose pour orchestrer plusieurs conteneurs, et nous dockeriserons ton application Streamlit de pr√©diction de prix de montres.
:::

---

[‚Üê Retour √† la Semaine 1](index.html){.btn .btn-secondary}
[Voir la Fiche de travail ‚Üí](fiche-travail-01.html){.btn .btn-primary}
